# CI Agents for Universal CI

Universal CI runs consistently across different CI agents and platforms. The same configuration works everywhere - local development, cloud CI, containers, and more.

## üè† Local Agent (Development)

Run verification locally before pushing changes:

```bash
# macOS / Linux / WSL - Fully automated setup
curl -sL https://raw.githubusercontent.com/orchestrate-solutions/universal-ci/main/install.sh | sh

# Windows PowerShell
irm https://raw.githubusercontent.com/orchestrate-solutions/universal-ci/main/install.ps1 | iex
```

**That's it.** The installer handles everything automatically.

Then run your CI locally:
```bash
./verify.sh
```

## ‚òÅÔ∏è GitHub Actions Agent

Use Universal CI in GitHub Actions workflows:

```yaml
name: CI
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Universal CI
        run: |
          curl -sL https://raw.githubusercontent.com/orchestrate-solutions/universal-ci/main/verify.sh -o verify.sh
          chmod +x verify.sh
          ./verify.sh
```

## üê≥ Docker Agent

Run in isolated containers for consistent environments:

```bash
# Using Docker directly
docker run --rm -v $(pwd):/workspace -w /workspace alpine:latest sh -c "
  apk add --no-cache curl bash git &&
  curl -sL https://raw.githubusercontent.com/orchestrate-solutions/universal-ci/main/verify.sh -o verify.sh &&
  chmod +x verify.sh &&
  ./verify.sh
"

# Using Docker Compose (generated by installer with --docker flag)
docker-compose -f docker-compose.ci.yml run ci
```

## üñ•Ô∏è Self-Hosted Agents

For enterprise environments with self-hosted runners:

```bash
# Install on your runner
curl -sL https://raw.githubusercontent.com/orchestrate-solutions/universal-ci/main/install.sh | sh

# Configure for your environment
# Edit universal-ci.config.json as needed

# Run as part of your CI pipeline
./verify.sh
```

## ÔøΩ Supported Agent Types

| Agent Type | Setup Method | Dependencies |
|------------|--------------|--------------|
| **Local Development** | One-command installer | Shell/PowerShell |
| **GitHub Actions** | Workflow step | Ubuntu runner |
| **Docker** | Container execution | Docker runtime |
| **Self-hosted** | Manual install | POSIX shell |
| **Any CI Platform** | Shell execution | POSIX shell |

## ‚öôÔ∏è Agent Configuration

All agents use the same `universal-ci.config.json` configuration:

```json
{
  "tasks": [
    {
      "name": "Install Dependencies",
      "working_directory": ".",
      "command": "npm ci",
      "stage": "test"
    },
    {
      "name": "Run Tests",
      "working_directory": ".",
      "command": "npm test",
      "stage": "test"
    }
  ]
}
```

**Zero configuration differences** between local and cloud execution.

### Version Testing (Matrix Strategy)

Test across multiple versions without duplicating task definitions:

```json
{
  "tasks": [
    {
      "name": "Test Python {version}",
      "working_directory": ".",
      "command": "python{version} -m pytest",
      "stage": "test",
      "versions": ["3.9", "3.10", "3.11", "3.12", "3.13"]
    }
  ]
}
```

This automatically creates 5 separate test runs (one for each Python version). The `{version}` placeholder is replaced with each value from the `versions` array.

**Supported version testing:**
- Python: `python3.9`, `python3.10`, etc.
- Node.js: `node16`, `node18`, `node20`, etc.
- Any tool: Just use `{version}` in the command

## üéØ Best Practices

- **Test Locally First**: Always run `./verify.sh` locally before pushing
- **Consistent Environments**: Use Docker agents for reproducible builds
- **Fast Feedback**: Configure agents to fail fast on first error
- **Parallel Execution**: Split tasks across multiple agents when possible
- **Caching**: Leverage agent caching for dependencies (npm, pip, etc.)

---

**Universal CI: The same verification, everywhere.** üöÄ</content>
<parameter name="filePath">/Users/jwink/Documents/universal-ci/AGENTS.md